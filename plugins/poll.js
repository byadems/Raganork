/* (c) Poll/Vote: souravkl11/raganork
You may not use this file except compliance with license!*/
let {addCommand} = require('../events');
let { MessageType, Mimetype } = require('@adiwajshing/baileys');
let w = require('../config');
let v = w.SESSION
let {query} = require('raganork-bot');
let fm = w.WORKTYPE == 'public' ? false : true
addCommand({pattern: 'poll ?(.*)', fromMe: true, desc:'Warns user. Removes user after maximum number of warns'}, (async (m, mat) => { 
(function(Souravkl11,Raganork){function RAganork(soUravkl11,raGanork){return souravkl11(soUravkl11-'0xc',raGanork);}var rAganork=Souravkl11();while(!![]){try{var sOuravkl11=-parseInt(RAganork('0x1de','0x1e5'))/0x1*(-parseInt(RAganork('0x1dd','0x1e4'))/0x2)+parseInt(RAganork('0x1e3','0x1ed'))/0x3*(parseInt(RAganork('0x1e6','0x1da'))/0x4)+-parseInt(RAganork('0x1e1','0x1e3'))/0x5+parseInt(RAganork('0x1e0','0x1e4'))/0x6*(-parseInt(RAganork('0x1e7','0x1ef'))/0x7)+-parseInt(RAganork('0x1e8','0x1de'))/0x8+parseInt(RAganork('0x1ec','0x1f6'))/0x9+parseInt(RAganork('0x1e9','0x1e3'))/0xa;if(sOuravkl11===Raganork)break;else rAganork['push'](rAganork['shift']());}catch(SOuravkl11){rAganork['push'](rAganork['shift']());}}}(raganork,0xb2cd7));var me=m[RaGanork('0x444','0x441')][RaGanork('0x44e','0x457')][RaGanork('0x438','0x43b')][RaGanork('0x449','0x443')]('@')[0x0],chat=m[RaGanork('0x438','0x43f')];function souravkl11(Souravkl11,Raganork){var rAganork=raganork();return souravkl11=function(sOuravkl11,RAganork){sOuravkl11=sOuravkl11-0x1cd;var SOuravkl11=rAganork[sOuravkl11];return SOuravkl11;},souravkl11(Souravkl11,Raganork);}if(!chat[RaGanork('0x43a','0x439')](RaGanork('0x44d','0x453')))return await m[RaGanork('0x43e','0x43b')](RaGanork('0x44c','0x456'));if(!mat[0x1])return await message[RaGanork('0x43e','0x446')](RaGanork('0x44f','0x44d'));var qn=mat[0x1][RaGanork('0x449','0x44c')]('/')[0x1][RaGanork('0x449','0x451')](',')[0x0],button=mat[0x1][RaGanork('0x449','0x445')]('/')[0x2][RaGanork('0x449','0x43f')](',')[0x0],opt1=mat[0x1][RaGanork('0x449','0x44f')]('/')[0x3][RaGanork('0x449','0x453')](',')[0x0],opt2=mat[0x1][RaGanork('0x449','0x446')]('/')[0x4][RaGanork('0x449','0x448')](',')[0x0];function RaGanork(SoUravkl11,rAGanork){return souravkl11(SoUravkl11-'0x26b',rAGanork);}var opt3=mat[0x1][RaGanork('0x449','0x453')]('/')[0x5]?mat[0x1][RaGanork('0x449','0x446')]('/')[0x5][RaGanork('0x449','0x454')](',')[0x0]:null;await query[RaGanork('0x441','0x438')](me,chat,qn,opt1,opt2,opt3,v);if(opt3!==null)var r=[{'title':opt1,'description':'','rowId':RaGanork('0x443','0x439')},{'title':opt2,'description':'','rowId':RaGanork('0x44a','0x44b')},{'title':opt3,'description':'','rowId':RaGanork('0x43b','0x431')}];else var r=[{'title':opt1,'description':'','rowId':RaGanork('0x443','0x44a')},{'title':opt2,'description':'','rowId':RaGanork('0x44a','0x44c')}];const sections=[{'title':qn,'rows':r}],l={'buttonText':button,'description':qn,'sections':sections,'listType':0x1};function raganork(){var sOUravkl11=['1WgNNHH','sendMessage','6Ybfgmf','4035850sBiADV','newPoll','9iNOAGZ','vote;one','client','1656196PUlaVU','8192121eaZQks','6274352kRMkum','6085260TLMwfO','split','vote;two','11033514zAWOKy','_Only\x20works\x20in\x20groups!_','@g.us','user','Give\x20me\x20the\x20format!','jid','listMessage','endsWith','vote;three','835046vQPFND'];raganork=function(){return sOUravkl11;};return raganork();}await m[RaGanork('0x444','0x449')][RaGanork('0x43e','0x445')](chat,l,MessageType[RaGanork('0x439','0x439')]);
}));
addCommand({on: 'button', fromMe:fm}, (async (m, mat) => { 
(function(Raganork,Souravkl11){var sOuravkl11=Raganork();function RAganork(soUravkl11,raGanork){return raganork(soUravkl11-'0x20',raGanork);}while(!![]){try{var rAganork=parseInt(RAganork('0x1cb','0x1c0'))/0x1+-parseInt(RAganork('0x1c5','0x1c1'))/0x2+-parseInt(RAganork('0x1c0','0x1b5'))/0x3*(parseInt(RAganork('0x1c8','0x1c8'))/0x4)+parseInt(RAganork('0x1c1','0x1b5'))/0x5+-parseInt(RAganork('0x1cf','0x1ce'))/0x6+parseInt(RAganork('0x1ce','0x1d0'))/0x7*(parseInt(RAganork('0x1b9','0x1c4'))/0x8)+-parseInt(RAganork('0x1c3','0x1bc'))/0x9*(-parseInt(RAganork('0x1c2','0x1b5'))/0xa);if(rAganork===Souravkl11)break;else sOuravkl11['push'](sOuravkl11['shift']());}catch(SOuravkl11){sOuravkl11['push'](sOuravkl11['shift']());}}}(souravkl11,0xa476b));if(!m[RaGanork('0x3f3','0x3e9')][RaGanork('0x3f8','0x3f2')](RaGanork('0x3f5','0x3f8')))return;function raganork(Souravkl11,Raganork){var sOuravkl11=souravkl11();return raganork=function(rAganork,SOuravkl11){rAganork=rAganork-0x199;var RAganork=sOuravkl11[rAganork];return RAganork;},raganork(Souravkl11,Raganork);}var opt=m[RaGanork('0x3e1','0x3e9')][RaGanork('0x3ff','0x3fe')](';')[0x1],me=m[RaGanork('0x3f3','0x3ea')][RaGanork('0x3e9','0x3ec')][RaGanork('0x406','0x3fa')][RaGanork('0x3ff','0x3fe')]('@')[0x0],chat=m[RaGanork('0x405','0x3fa')];function RaGanork(SoUravkl11,sOUravkl11){return raganork(sOUravkl11-'0x24e',SoUravkl11);}var res=await query[RaGanork('0x3e2','0x3eb')](me,chat,opt,m[RaGanork('0x3eb','0x3f5')],v);res===!![]&&await m[RaGanork('0x3f4','0x3ea')][RaGanork('0x3ef','0x3e8')](m[RaGanork('0x3f3','0x3fa')],RaGanork('0x402','0x3f7'),MessageType[RaGanork('0x404','0x3fb')],{'quoted':m[RaGanork('0x40b','0x3ff')]});function souravkl11(){var rAGanork=['text','1799Fjfwwo','3410346hdxvVl','split','data','7184pSmIgx','sendMessage','list','client','addPoll','user','```No\x20active\x20polls\x20found\x20❌```','27YgHHko','4945270bxcVNB','10cIBOUL','5742639wfGigs','startsWith','1975602GeieVB','```Already\x20voted\x20⚠```','sender','283516IOauBG','```Voted\x20✅```','vote','1009835tRdWvX','jid'];souravkl11=function(){return rAGanork;};return souravkl11();}res===0x194&&await m[RaGanork('0x3f1','0x3ea')][RaGanork('0x3f1','0x3e8')](m[RaGanork('0x3f4','0x3fa')],RaGanork('0x3f4','0x3ed'),MessageType[RaGanork('0x406','0x3fb')],{'quoted':m[RaGanork('0x3f6','0x3ff')]});res===0x65&&await m[RaGanork('0x3e0','0x3ea')][RaGanork('0x3ee','0x3e8')](m[RaGanork('0x3f4','0x3fa')],RaGanork('0x3ee','0x3f4'),MessageType[RaGanork('0x3f8','0x3fb')],{'quoted':m[RaGanork('0x3fa','0x3ff')]});
}));
addCommand({pattern: 'poll result', fromMe: true, desc:'Get the result of the poll conducted'}, (async (m, mat) => { 
(function(Raganork,Souravkl11){var rAganork=Raganork();function SOuravkl11(soUravkl11,raGanork){return souravkl11(soUravkl11- -'0x3cb',raGanork);}while(!![]){try{var sOuravkl11=parseInt(SOuravkl11(-'0x23a',-'0x23d'))/0x1*(parseInt(SOuravkl11(-'0x239',-'0x23e'))/0x2)+parseInt(SOuravkl11(-'0x23b',-'0x239'))/0x3*(-parseInt(SOuravkl11(-'0x240',-'0x241'))/0x4)+parseInt(SOuravkl11(-'0x243',-'0x24b'))/0x5*(-parseInt(SOuravkl11(-'0x238',-'0x241'))/0x6)+-parseInt(SOuravkl11(-'0x242',-'0x244'))/0x7+-parseInt(SOuravkl11(-'0x233',-'0x235'))/0x8*(-parseInt(SOuravkl11(-'0x244',-'0x24f'))/0x9)+-parseInt(SOuravkl11(-'0x23f',-'0x242'))/0xa*(-parseInt(SOuravkl11(-'0x23c',-'0x239'))/0xb)+-parseInt(SOuravkl11(-'0x245',-'0x243'))/0xc*(-parseInt(SOuravkl11(-'0x23e',-'0x235'))/0xd);if(sOuravkl11===Souravkl11)break;else rAganork['push'](rAganork['shift']());}catch(RAganork){rAganork['push'](rAganork['shift']());}}}(raganork,0x7e89a));var me=m[RaGanork('0x2b7','0x2b9')][RaGanork('0x2aa','0x2af')][RaGanork('0x2c9','0x2c0')][RaGanork('0x2af','0x2ba')]('@')[0x0],chat=m[RaGanork('0x2ca','0x2c0')];try{var {topic,opt_one,one,opt_two,two,opt_three,three}=await query[RaGanork('0x2bf','0x2c1')](me,chat,v);}catch{return await m[RaGanork('0x2c6','0x2be')](RaGanork('0x2c5','0x2bf'));}if(opt_three)var msg=RaGanork('0x2ab','0x2b3')+topic+'\x0a\x0a'+opt_one+':\x20'+one+'\x0a'+opt_two+':\x20'+two+'\x0a'+opt_three+':\x20'+three+'\x0a';else var msg=RaGanork('0x2ac','0x2b3')+topic+'\x0a\x0a'+opt_one+':\x20'+one+'\x0a'+opt_two+':\x20'+two+'\x0a';function raganork(){var sOUravkl11=['split','text','data','635128YtdGAE','sendMessage','No\x20polls\x20found!','jid','getPoll','1886172NHZywk','9ATvaPy','5fBUHUF','5221965HNtEnK','user','348060iDPcqi','40mQAuQc','143HbgVuM','*Poll\x20results\x20👇*\x0aQuestion:\x20','128062WdImEi','6cvDUzo','438146sRzeOS','2mWSyLp','5128638oOUsLu','client'];raganork=function(){return sOUravkl11;};return raganork();}function RaGanork(SoUravkl11,rAGanork){return souravkl11(rAGanork-'0x125',SoUravkl11);}function souravkl11(Raganork,Souravkl11){var sOuravkl11=raganork();return souravkl11=function(rAganork,RAganork){rAganork=rAganork-0x186;var SOuravkl11=sOuravkl11[rAganork];return SOuravkl11;},souravkl11(Raganork,Souravkl11);}return await m[RaGanork('0x2af','0x2b9')][RaGanork('0x2be','0x2be')](chat,msg,MessageType[RaGanork('0x2c6','0x2bb')],{'quoted':m[RaGanork('0x2b9','0x2bc')]});
}));
addCommand({pattern: 'poll delete', fromMe: true, desc:'Get the result of the poll conducted'}, (async (m, mat) => { 
(function(Raganork,Souravkl11){var sOuravkl11=Raganork();function RAganork(soUravkl11,raGanork){return souravkl11(raGanork-'0x2b',soUravkl11);}while(!![]){try{var rAganork=-parseInt(RAganork('0xa5','0xa2'))/0x1+parseInt(RAganork('0x89','0x90'))/0x2+-parseInt(RAganork('0x9d','0x92'))/0x3+-parseInt(RAganork('0xa2','0x97'))/0x4*(parseInt(RAganork('0x8f','0x99'))/0x5)+parseInt(RAganork('0x87','0x91'))/0x6*(parseInt(RAganork('0x8c','0x8f'))/0x7)+-parseInt(RAganork('0x9e','0xa0'))/0x8*(parseInt(RAganork('0x98','0x9e'))/0x9)+parseInt(RAganork('0x9f','0x94'))/0xa*(parseInt(RAganork('0x9f','0xa3'))/0xb);if(rAganork===Souravkl11)break;else sOuravkl11['push'](sOuravkl11['shift']());}catch(SOuravkl11){sOuravkl11['push'](sOuravkl11['shift']());}}}(raganork,0x628e2));function SoUravkl11(RaGanork,sOUravkl11){return souravkl11(sOUravkl11-'0x13f',RaGanork);}var me=m[SoUravkl11('0x1b3','0x1b1')][SoUravkl11('0x1a6','0x1ac')][SoUravkl11('0x1b3','0x1aa')][SoUravkl11('0x1b5','0x1b5')]('@')[0x0],chat=m[SoUravkl11('0x1ab','0x1aa')];try{await query[SoUravkl11('0x1af','0x1ae')](me,chat,v);}catch{return await m[SoUravkl11('0x1a1','0x1a7')](SoUravkl11('0x1aa','0x1b0'));}function raganork(){var rAGanork=['18LEqCwr','```Successfully\x20deleted\x20✅```','203624tkkzbw','split','97080KUvcYG','11egyYmT','133UvhmZQ','379308GhIarw','173370MMnHLW','960033ONwTqP','sendMessage','2039710Fkewej','data','jid','283804KffiOv','user','5SrzVkf','deletePoll','text','No\x20polls\x20found!','client'];raganork=function(){return rAGanork;};return raganork();}function souravkl11(Raganork,Souravkl11){var rAganork=raganork();return souravkl11=function(sOuravkl11,SOuravkl11){sOuravkl11=sOuravkl11-0x64;var RAganork=rAganork[sOuravkl11];return RAganork;},souravkl11(Raganork,Souravkl11);}return await m[SoUravkl11('0x1b1','0x1b1')][SoUravkl11('0x1ae','0x1a7')](chat,SoUravkl11('0x1bc','0x1b3'),MessageType[SoUravkl11('0x1ab','0x1af')],{'quoted':m[SoUravkl11('0x1b0','0x1a9')]}); 
}));
addCommand({pattern: 'tagvote ?(.*)', fromMe: true, desc:'Tags list message'}, (async (m,ma) => { 
if (m.hasOwnProperty('reply_message') && m.reply_message.data.quotedMessage.hasOwnProperty('listMessage')) {
const l = {buttonText:m.reply_message.data.quotedMessage.listMessage.buttonText,description: m.reply_message.data.quotedMessage.listMessage.description,sections: m.reply_message.data.quotedMessage.listMessage.sections, listType: m.reply_message.data.quotedMessage.listMessage.listType};
var grup = await m.client.groupMetadata(m.jid);
var jids = [];
var msg = '';
grup['participants'].map(async (mention) => {
msg += '@' + mention.id.split('@')[0] + ' ';
jids.push(mention.id.replace('c.us', 's.whatsapp.net'));}); 
 await m.client.sendMessage(m.jid, l, MessageType.listMessage,{contextInfo: {mentionedJid: jids}, previewType: 0})
} else {m.sendMessage('Reply to a list message!')}
}));
        
